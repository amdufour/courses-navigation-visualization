/*! project-name v0.0.1 | (c) 2021 YOUR NAME | MIT License | http://link-to-your-git-repo.com */
function prepData(){let e=-1;const t=[],o=[];let n;console.log(data);const s=o=>{const s={name:o};t.push(s),nodeByKey.set(n,s),indexByKey.set(n,++e)};for(const e of keys)for(const t of data){let o="";if("object"==typeof t[e.id])for(const i of t[e.id])o=i,n=JSON.stringify([e.id,o]),nodeByKey.has(n)||s(o);else{if(o=t[e.id],n=JSON.stringify([e.id,o]),nodeByKey.has(n))continue;s(o)}}for(let e=1;e<keys.length;++e){const t=keys[e-1].id,n=keys[e].id,s=[];keys.slice(0,e+1).forEach(e=>{s.push(e.id)});const i=new Map;for(const a of data){const y=s.map(e=>a[e]);let f=a[t].length*a[n].length;for(const s of y[e-1])for(const c of y[e]){const e=[s,c],r=JSON.stringify(e),d=a.value/f;let l=i.get(r);l?l.value+=d:(l={source:indexByKey.get(JSON.stringify([t,s])),target:indexByKey.get(JSON.stringify([n,c])),names:y,value:d},o.push(l),i.set(r,l))}}}graphData={nodes:t,links:o},createSankey()}prepData();